# kode-notes

## Требования
Необходимо спроектировать и реализовать на Golang сервис, предоставляющий REST API интерфейс с методами:
- добавление заметки
- вывод списка заметок

При сохранении заметок необходимо орфографические ошибки валидировать при помощи сервиса Яндекс.Спеллер (добавить интеграцию с сервисом). Также необходимо реализовать аутентификацию и авторизацию. Пользователи должны иметь доступ только к своим заметкам. Возможность регистрации не обязательна, допустимо иметь предустановленный набор пользователей (механизм хранения учетных записей любой, вплоть до hardcode в приложении).

## Используемые технологии
- В качестве веб-фреймворка был выбран chi
- Для базы данных использовался PostgreSQL

## Краткая информация по реализации
Всего было реализовано 4 эндпоинта: '/register', 'login', 'create', '/notes'.

Не смотря на то, что реализация регистрации была не обязательной, я решил добавить функционал регистрации пользователя, чтобы картина использования приложения была более полной.

При авторизации пользователю выдается токен, который сохраняется в куки. При попытке создания заметки или получения всего списка заметок производится проверка токена.

## Запуск сервиса
для запуска приложения вместе с базой данных
```
docker-compose up
```
Приложение будет запущено не сразу, чтобы дождаться полного запуска базы данных. Если сервису не получиться подключиться к базе данных, то приложение упадет с паникой. Точно также решил сделать и с конфигом. Это было сделано целенаправленно, т.к. нет смысла в дальнейшей работе приложения, если нет доступа к бд или конфиги были прочитаны неудачно 

## Проверка работы приложения
### POST /register
Требуется отправить имя пользователя и пароль

Запрос:
```
curl -X POST http://localhost:3000/api/v1/create -H 'Content-Type: application/json' -d '{"username":"my_username","password":"my_password"}'
```
Ответ:

При удачной регистрации будет возвращен код 200. Если пользователь уже существует, то будет возвращена ошибка о том, что такой пользователь уже есть

### POST /login
Требуется отправить имя пользователя и пароль

Запрос:
```
curl -c ./cookie -X POST http://localhost:3000/api/v1/login -H 'Content-Type: application/json' -d '{"username":"my_username","password":"my_password"}'
```
Ответ:

При успешном входе будет возвращен код 200 и в куки файлы будет записан токен пользователя при помощи которого будет дальнейшая работа с заметками

### POST /create
Требуется в JSON отправить id пользователя и сам текст

Запрос:
```
curl -b ./cookie -X POST http://localhost:3000/api/v1/create -H 'Content-Type: application/json' -d '{"user_id":"my_userid","text":"my_text"}'
```
Ответ:

При успешной записи записки будет возвращен код 200. Если не удалось записать заметку, не удалось проверить текст на ошибки, сам текст записки был пустой - будет возвращена ошибка

### GET /notes

Запрос:
```
curl -c ./cookie -X GET http://localhost:3000/api/v1/notes
```
Ответ:

```
[
  {
    "text":"кокой то текст",
    "mistakes":[
        {
          "original_word":"кокой",
          "correct_word":["какой"]
        }
    ],
    "id":1,
    "user_id":1
  }
]
```


